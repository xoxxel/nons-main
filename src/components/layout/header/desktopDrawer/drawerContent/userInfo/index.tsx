"use client";
import { UserContext } from "@/context/UserProvider";
import ThousandSeparator from "@/utils/thousandSeparator";
import { Box, Typography } from "@mui/material";
import Image from "next/image";
import { useContext } from "react";

const UserInfo = () => {
  const { user } = useContext(UserContext);

  return (
    <Box sx={{ position: "relative" }}>
      <Box sx={{ display: "flex", alignItems: "center", gap: 1, mb: 2 }}>
        <Image
          src={user?.image ? `${process.env.NEXT_PUBLIC_SERVER}/${user?.image}` : "/images/boredape.png"}
          width={66}
          height={66}
          alt="profile"
          style={{
            borderRadius: "50px",
            border: "2px solid white",
            objectFit: "cover",
            position: "absolute",
            top: "-50px",
            right: "20px",
            boxShadow: "0px 4px 4px 0px #00000026 inset",
          }}
        />
      </Box>
      <Box
        sx={{
          px: "10px",
          pt: 2,
        }}
      >
        <Box
          sx={{
            display: "flex",
            alignItems: "center",
            color: "text.main",
            width: "100%",
            justifyContent: "space-between",
          }}
        >
          {/* right side columns */}
          <Box sx={{ display: "flex", flexDirection: "column", gap: "10px" }}>
            <Box sx={{ display: "flex", alignItems: "center", gap: 1 }}>
              <Typography sx={{ color: "text.main", fontWeight: "600" }}>
                {user?.name ?? "کاربر جدید"}
              </Typography>
              {user?.has_authentication && (
                <svg
                  width="18"
                  height="19"
                  viewBox="0 0 18 19"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M13.9204 3.80169C14.0905 4.20703 14.417 4.52923 14.8282 4.69744L16.2699 5.28581C16.6813 5.45372 17.0082 5.77579 17.1786 6.18117C17.3491 6.58654 17.3491 7.04202 17.1786 7.44739L16.5819 8.86683C16.4114 9.27238 16.4112 9.72832 16.5824 10.1337L17.1781 11.5527C17.2626 11.7535 17.3061 11.9687 17.3062 12.186C17.3062 12.4034 17.2628 12.6186 17.1783 12.8194C17.0939 13.0202 16.9702 13.2027 16.8142 13.3563C16.6581 13.51 16.4729 13.6318 16.2691 13.715L14.8284 14.3029C14.417 14.4705 14.09 14.7922 13.9193 15.1973L13.3221 16.6178C13.1517 17.0231 12.8248 17.3452 12.4134 17.5131C12.0019 17.681 11.5396 17.681 11.1282 17.5131L9.68754 16.9252C9.27609 16.7577 8.81397 16.758 8.40278 16.9261L6.96108 17.5137C6.54987 17.6812 6.08799 17.681 5.67688 17.5133C5.26578 17.3455 4.93908 17.0238 4.76854 16.6189L4.17119 15.198C4.00108 14.7926 3.67456 14.4704 3.26341 14.3022L1.82171 13.7139C1.41045 13.546 1.08366 13.2242 0.913174 12.819C0.742688 12.4139 0.742457 11.9586 0.912531 11.5533L1.50927 10.1339C1.67928 9.72848 1.67893 9.27316 1.50831 8.86803L0.912422 7.44656C0.827938 7.24578 0.784435 7.03057 0.7844 6.81322C0.784364 6.59587 0.827797 6.38065 0.912217 6.17984C0.996636 5.97904 1.12039 5.79659 1.2764 5.64293C1.43241 5.48927 1.61763 5.3674 1.82146 5.28429L3.26213 4.69634C3.67317 4.52888 3.99999 4.20758 4.17084 3.80295L4.76802 2.3825C4.93844 1.97712 5.26532 1.65505 5.67676 1.48714C6.0882 1.31923 6.55049 1.31923 6.96192 1.48714L8.40259 2.07509C8.81404 2.24259 9.27616 2.24225 9.68735 2.07414L11.1297 1.48805C11.541 1.32024 12.0032 1.32027 12.4146 1.48815C12.8259 1.65603 13.1528 1.978 13.3232 2.38327L13.9206 3.80415L13.9204 3.80169Z"
                    fill="#0788F5"
                  />
                  <path
                    fillRule="evenodd"
                    clipRule="evenodd"
                    d="M12.5525 7.18692C12.6721 7.00176 12.7122 6.77735 12.6639 6.56306C12.6157 6.34878 12.483 6.16216 12.295 6.04428C12.1071 5.9264 11.8793 5.8869 11.6618 5.93447C11.4443 5.98204 11.2549 6.11279 11.1353 6.29796L7.84753 11.388L6.34302 9.53507C6.20392 9.36365 6.00142 9.2537 5.78004 9.22939C5.55867 9.20509 5.33656 9.26843 5.16258 9.40547C4.9886 9.54252 4.877 9.74204 4.85234 9.96015C4.82767 10.1783 4.89195 10.3971 5.03105 10.5685L7.26991 13.3258C7.35334 13.4287 7.46051 13.5105 7.58249 13.5644C7.70447 13.6182 7.83774 13.6426 7.97121 13.6355C8.10469 13.6284 8.23451 13.59 8.34987 13.5234C8.46524 13.4569 8.56282 13.3642 8.63449 13.2531L12.5525 7.18692Z"
                    fill="white"
                  />
                </svg>
              )}
            </Box>
          </Box>
        </Box>
      </Box>
    </Box>
  );
};

export default UserInfo;
